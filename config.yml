mode: dev
entries:
  - name: terraform
    source:
      type: command
      command: |
        terraform version | sed -E 's/.*v(.*)/\1/'
    provider:
      type: regex
      url: https://releases.hashicorp.com/terraform/
      regex: '.*>terraform_(.*)<.*'
    hooks:
      - type: download
        url: 'https://releases.hashicorp.com/terraform/{{.Version}}/terraform_{{.Version}}_linux_amd64.zip'
        dest: '$HOME/.local/bin/terraform'
        extract:
          file: terraform

  - name: helmfile
    source:
      type: command
      command: |
        helmfile -v | sed -rn 's/.*v([0-9\.]+)/\1/p'
    provider:
      type: github
      repo: roboll/helmfile
  # - https://github.com/mholt/archiver/releases
  # - helmfile
